[gd_scene load_steps=18 format=3 uid="uid://btp82fmwrwhyh"]

[ext_resource type="MeshLibrary" uid="uid://qvxl4ouj04dm" path="res://modular_gridmap/tiles.meshlib" id="2_dhd0k"]
[ext_resource type="Material" uid="uid://boqex8ji6yx6r" path="res://materials/arrow.tres" id="3_kj7pg"]
[ext_resource type="PackedScene" uid="uid://c2x4py0bkprgv" path="res://ending/exit.tscn" id="3_lgf22"]
[ext_resource type="PackedScene" uid="uid://c5cjlmay4qhby" path="res://lighting/omni_light_3d_1.tscn" id="4_lgf22"]
[ext_resource type="PackedScene" uid="uid://b13fw37sa4dh6" path="res://actors/guests/guest.tscn" id="5_gq2mk"]
[ext_resource type="Script" uid="uid://belsnvl4c3y3y" path="res://actors/hurt_shape.gd" id="5_pclft"]
[ext_resource type="Material" uid="uid://bladrdv7k4vo0" path="res://actors/guests/outfits/materials/black_dress.tres" id="6_ans3s"]
[ext_resource type="Material" uid="uid://q4j6fjnj1vce" path="res://actors/guests/outfits/materials/white_dress.tres" id="7_8wpla"]
[ext_resource type="PackedScene" uid="uid://du4bubv5mffvu" path="res://decoration/spikes.blend" id="9_ans3s"]
[ext_resource type="PackedScene" uid="uid://ctb6ukap5phlj" path="res://decoration/window.blend" id="10_8wpla"]

[sub_resource type="BoxShape3D" id="BoxShape3D_xaf06"]
resource_local_to_scene = true
size = Vector3(7.66821, 8.00037, 11.7023)

[sub_resource type="NavigationMesh" id="NavigationMesh_gq2mk"]
vertices = PackedVector3Array(-3, 4.2, -2.23517e-08, -3, 4.2, 12, 5, 4.2, 12, 5, 4.2, -2.23517e-08, 0.3, 0.2, 0.3, 0.2, 0.2, 0.1, -0.2, 0.2, 0.1, -0.3, 0.2, 0.3, -2.8, 0.2, 2.1, -2.7, 0.1, 4.1, 4.8, 0.2, 4, 4.7, 0.2, 0.3, -2.7, 0.2, 0.3, -2.7, -3.9, 4.3, -2.7, -3.9, 5.7, 4.7, -3.9, 5.7, 4.7, -3.9, 4.3, -2.8, 0.2, 6.2, -3, 0.2, 6.2, -3, 0.2, 7.9, -2.7, 0.2, 8.2, 4.8, 0.1, 5.9, -2.7, 0.1, 5.9, 4.7, 0.2, 11.7, 4.8, 0.2, 10, -2.7, 0.2, 11.7)
polygons = [PackedInt32Array(3, 2, 0), PackedInt32Array(0, 2, 1), PackedInt32Array(5, 4, 6), PackedInt32Array(6, 4, 7), PackedInt32Array(8, 4, 9), PackedInt32Array(9, 4, 11), PackedInt32Array(9, 11, 10), PackedInt32Array(8, 12, 7), PackedInt32Array(8, 7, 4), PackedInt32Array(16, 15, 13), PackedInt32Array(13, 15, 14), PackedInt32Array(19, 18, 17), PackedInt32Array(17, 22, 19), PackedInt32Array(19, 22, 20), PackedInt32Array(20, 22, 21), PackedInt32Array(24, 23, 21), PackedInt32Array(21, 23, 20), PackedInt32Array(20, 23, 25)]
cell_size = 0.1
cell_height = 0.1
border_size = 0.1
agent_height = 0.1
agent_radius = 0.1
region_min_size = 2.68
region_merge_size = 69.55

[sub_resource type="PrismMesh" id="PrismMesh_kj7pg"]
size = Vector3(1, 1, 0.25)

[sub_resource type="BoxMesh" id="BoxMesh_lgf22"]
size = Vector3(0.25, 1, 0.25)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_8wpla"]
resource_local_to_scene = true
albedo_color = Color(0.39, 0.2106, 0.25545, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_b5gam"]
resource_local_to_scene = true
albedo_color = Color(0.3195, 0.3543, 0.45, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_aio8d"]
size = Vector3(8.98067, 1, 2.92328)

[node name="Room" type="Node3D"]

[node name="Area3D" type="Area3D" parent="." groups=["room_bounds"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, 10)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Area3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.019165, 0.092078, -4.09463)
shape = SubResource("BoxShape3D_xaf06")
debug_color = Color(0.877855, 0.585429, 0.277921, 1)

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_gq2mk")

[node name="GridMap" type="GridMap" parent="NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, 10)
mesh_library = ExtResource("2_dhd0k")
data = {
"cells": PackedInt32Array(1, 0, 1, 0, 0, 1, 65535, 0, 1, 65535, 65535, 1, 65534, 65535, 1, 65534, 65532, 1, 65535, 65532, 1, 65535, 65531, 1, 0, 65531, 1, 0, 65532, 1, 1, 65532, 1, 1, 65534, 1, 1, 65535, 1, 0, 65535, 1, 0, 65534, 1, 65535, 65534, 1, 65534, 65531, 1, 1, 65531, 1, 65534, 0, 1, 1, 1, 1048578, 0, 1, 1048578, 65535, 1, 1048578, 65534, 1, 1048578, 65533, 0, 2, 65533, 65535, 2, 65533, 65532, 2, 65533, 65531, 2, 2, 0, 655362, 2, 65535, 655362, 2, 65534, 655362, 2, 65533, 655362, 2, 65532, 655362, 2, 65531, 655362, 1, 65530, 1441794, 65534, 65530, 1441794, 65535, 65530, 1441792, 0, 65530, 1441794, 65537, 0, 1310722, 65536, 0, 1441794, 131071, 0, 1441794, 131070, 0, 1441794, 131069, 0, 2, 131069, 65535, 2, 131069, 65534, 2, 131069, 65533, 2, 131069, 65532, 2, 131069, 65531, 2, 131070, 65530, 1441794, 65537, 65530, 1441794, 131071, 65530, 1441794, 65536, 65530, 1441794, 65537, 65531, 524290, 65537, 65532, 524290, 65537, 65533, 524290, 65537, 65534, 524290, 65537, 65535, 524290, 65538, 0, 131074, 131073, 65531, 1441793, 131072, 65531, 1441793, 196607, 65531, 1441793, 196606, 65531, 1441793, 196606, 0, 1441793, 196607, 0, 1441793, 131072, 0, 1441793, 131073, 0, 1441793, 131073, 65535, 1441793, 131073, 65534, 1441793, 131073, 65533, 1441793, 131073, 65532, 1441793, 196606, 65532, 1441793, 196606, 65533, 1441793, 196606, 65534, 1441793, 196606, 65535, 1441793, 196607, 65535, 1441793, 131072, 65535, 1441793, 131072, 65534, 1441793, 131072, 65533, 1441793, 131072, 65532, 1441793, 196607, 65532, 1441793, 196607, 65533, 1441793, 196607, 65534, 1441793, 65533, 65533, 2, 65534, 65534, 1, -131071, 65533, 1, -131072, 65533, 1, -65537, 65533, 1, -65538, 65533, 1, -65537, 65534, 1048578, -65538, 65534, 1048578, -131072, 65534, 1048578, -131071, 65534, 1048578, -131071, 65532, 1441794, -131072, 65532, 1441794, -65537, 65532, 1441794, -65538, 65532, 1441794, -2, 65532, 1441794, -1, 65532, 1441794, -65536, 65532, 1441794, -65535, 65532, 1441794, -65535, 65533, 2, -65536, 65533, 1048578, -1, 65533, 1048578, -2, 65533, 1048578, -2, 65534, 1048578, -1, 65534, 1048578, -65536, 65534, 1048578, -65535, 65534, 1048578, -3, 65533, 2, -65539, 65533, 2, -131070, 65533, 655362)
}
metadata/_editor_floor_ = Vector3(0, -2, 0)

[node name="Exit" type="Node3D" parent="." groups=["room_exit"]]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -3, 0, 7)

[node name="GridMap" type="GridMap" parent="Exit"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 1, 0, 2)
mesh_library = ExtResource("2_dhd0k")
data = {
"cells": PackedInt32Array(0, 65535, 2)
}

[node name="Arrow" type="MeshInstance3D" parent="Exit"]
transform = Transform3D(0.5, 0, 0, 0, -2.18557e-08, 0.5, 0, -0.5, -2.18557e-08, 5.29396e-23, 0.391355, 0.799065)
visible = false
material_override = ExtResource("3_kj7pg")
mesh = SubResource("PrismMesh_kj7pg")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Exit/Arrow"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.898831, -7.50693e-23)
material_override = ExtResource("3_kj7pg")
mesh = SubResource("BoxMesh_lgf22")

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]

[node name="Ending" parent="." instance=ExtResource("3_lgf22")]
transform = Transform3D(-0.779863, 0, -0.625951, 0, 1, 0, 0.625951, 0, -0.779863, 4.40236, -0.00811379, 11.4477)

[node name="OmniLight3D" parent="." instance=ExtResource("4_lgf22")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.927687, 2.10336, 7.09527)

[node name="Guests" type="Node3D" parent="."]

[node name="Bodyguard2" parent="Guests" instance=ExtResource("5_gq2mk")]
transform = Transform3D(-0.827649, 0, 0.561246, 0, 1, 0, -0.561246, 0, -0.827649, -1.23623, 0.0010355, 7.39325)
start_animation = "Bodyguard_1"
dress_materials = Array[StandardMaterial3D]([ExtResource("6_ans3s"), SubResource("StandardMaterial3D_8wpla"), ExtResource("7_8wpla"), SubResource("StandardMaterial3D_b5gam")])

[node name="Area3D2" type="Area3D" parent="."]
script = ExtResource("5_pclft")
damage = 100000.0

[node name="CollisionShape3D" type="CollisionShape3D" parent="Area3D2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.08581, -3.10825, 5.00392)
shape = SubResource("BoxShape3D_aio8d")

[node name="spikes" parent="." instance=ExtResource("9_ans3s")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.36684, -4.10848, 5.38812)

[node name="spikes2" parent="." instance=ExtResource("9_ans3s")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.110329, -4.10848, 5.38812)

[node name="spikes3" parent="." instance=ExtResource("9_ans3s")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.51899, -4.10848, 5.38812)

[node name="spikes4" parent="." instance=ExtResource("9_ans3s")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.98355, -4.10848, 5.38812)

[node name="spikes5" parent="." instance=ExtResource("9_ans3s")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.35106, -4.10848, 5.38812)

[node name="window" parent="." instance=ExtResource("10_8wpla")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 4.90886, 1.56328, 7.14236)

[node name="window2" parent="." instance=ExtResource("10_8wpla")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 4.90886, 1.56328, 8.51835)

[node name="window3" parent="." instance=ExtResource("10_8wpla")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 4.90886, 1.56328, 9.9697)

[node name="window4" parent="." instance=ExtResource("10_8wpla")]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, 0.592534, 1.56328, 11.9045)
